<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="weather.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <!-- <div class="heading">the weather</div> -->
  <div class="box">
    <input type="text" placeholder="Search Location....">
    <button class="Search"><i class="fa-solid fa-magnifying-glass"></i></button><hr>

    <div class="box2">
      <div class="temp_c"><span>8</span><sup>oC</sup></div>
      <div class="name">London</div><br>
      <div class="localtime">2024-06-10 18:21</div>
      <div class="icon"><i class="fa-solid fa-mountain-sun"></i></div>
      <div class="text">Moderate rain</div>
    </div><hr>

    <div class="info">
    <h1>Weather Details</h1>
    <div class="cloud">Cloudy <i class="fa-solid fa-cloud"></i><span>75</span></div>
    <div class="humidity">Humidity <i class="fa-solid fa-temperature-half"></i><span>93</span></div>
    <div class="wind_mph">Wind <i class="fa-solid fa-wind"></i><span>11.2</span></div>
    <div class="wind_dir">Wind Direction <i class="fa-solid fa-wind"></i><span>NNE</span></div>
    <div class="uv">Ultraviolet <i class="fa-regular fa-sun"></i><span>3</span></div>
    <div class="gust_mph">Gust <i class="fa-solid fa-smog"></i><span>10.6</span></div>
    <div class="pressure_mb">Pressure <i class="fa-solid fa-wind"></i><span>1014</span></div>
    </div>
  </div>
  <div class="watherImage"><img src="weatherImage.webp">
  <h1>Loading.....</h1></div>
  <script>
  let Search = document.querySelector(".Search");
let boxInput = document.querySelector(".box input");
let temp_c = document.querySelector(".temp_c span");
let name1=document.querySelector(".name");
let localtime=document.querySelector(".localtime");
let text=document.querySelector(".text");
let cloud=document.querySelector(".cloud span");
let humidity=document.querySelector(".humidity span");
let wind_mph=document.querySelector(".wind_mph span");
let wind_dir=document.querySelector(".wind_dir span");
let uv=document.querySelector(".uv span");
let gust_mph=document.querySelector(".gust_mph span");
let pressure_mb=document.querySelector(".pressure_mb span");
let icon1=document.querySelector(".icon img");
let watherImage=document.querySelector(".watherImage");
let box=document.querySelector(".box");

let weatherLocation="India";
let data;
box.style.visibility="hidden";
const getInfo = async () => {
    box.style.visibility="hidden";
    watherImage.style.visibility="visible";
    try {
        let url = `http://api.weatherapi.com/v1/current.json?key=130b44c27be74779913163747241006&q=${weatherLocation}`;
        let response = await fetch(url);

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        data = await response.json();
        temp_c.innerText = data.current.temp_c;
        name1.innerText=data.location.name;
        localtime.innerText=data.location.localtime;
        text.innerText=data.current.condition.text;
        cloud.innerText=`${data.current.cloud}%`;
        humidity.innerText=`${data.current.humidity}%`;

        wind_mph.innerText=`${data.current.wind_mph}(m/h)`;
        wind_dir.innerText=data.current.wind_dir;
        uv.innerText=data.current.uv;
        gust_mph.innerText=`${data.current.gust_mph}(mph)`;
        pressure_mb.innerText=`${data.current.pressure_mb}(millibars)`;
        icon1.src=data.current.condition.icon;
    } catch (error) {
        console.error('Error fetching weather data:', error);
    }
    box.style.visibility="visible";
    watherImage.style.visibility="hidden";
};

Search.addEventListener("click", () => {
    weatherLocation = boxInput.value.trim(); // Trim any extra whitespace
    if (weatherLocation) { // Ensure the location is not empty
        boxInput.value = "";
        getInfo();
    } else {
        console.error('Please enter a location');
    }
});

boxInput.addEventListener("keyup", (e) => {
    if (e.keyCode === 13) {
        weatherLocation = boxInput.value.trim(); // Trim any extra whitespace
        if (weatherLocation) { // Ensure the location is not empty
            boxInput.value = "";
            getInfo();
        } else {
            console.error('Please enter a location');
        }
    }
});
getInfo();
    </script>
</body>
</html>
